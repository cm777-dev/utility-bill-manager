{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Box,Paper,Typography,TextField,Button,MenuItem,Alert}from'@mui/material';import{DatePicker}from'@mui/x-date-pickers/DatePicker';import{LocalizationProvider}from'@mui/x-date-pickers/LocalizationProvider';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const utilityTypes=['Electricity','Water','Gas','Internet','Phone','Cable TV','Other'];export default function AddBill(){const[formData,setFormData]=useState({utility_type:'',amount:'',usage_amount:'',bill_date:null,due_date:null});const[file,setFile]=useState(null);const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleFileChange=e=>{if(e.target.files[0]){setFile(e.target.files[0]);}};const handleSubmit=async e=>{e.preventDefault();if(!file){setError('Please select a bill file');return;}try{setError('');setLoading(true);const formDataToSend=new FormData();formDataToSend.append('file',file);formDataToSend.append('utility_type',formData.utility_type);formDataToSend.append('amount',formData.amount);formDataToSend.append('usage_amount',formData.usage_amount);formDataToSend.append('bill_date',formData.bill_date.toISOString().split('T')[0]);formDataToSend.append('due_date',formData.due_date.toISOString().split('T')[0]);await axios.post('/api/bills',formDataToSend,{headers:{'Content-Type':'multipart/form-data'}});navigate('/bills');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to add bill');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Add New Bill\"}),/*#__PURE__*/_jsxs(Paper,{sx:{p:3,maxWidth:600,mx:'auto'},children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{select:true,fullWidth:true,label:\"Utility Type\",name:\"utility_type\",value:formData.utility_type,onChange:handleChange,required:true,sx:{mb:2},children:utilityTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type,children:type},type))}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Amount\",name:\"amount\",type:\"number\",value:formData.amount,onChange:handleChange,required:true,inputProps:{step:'0.01',min:'0'},sx:{mb:2}}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Usage Amount\",name:\"usage_amount\",type:\"number\",value:formData.usage_amount,onChange:handleChange,inputProps:{step:'0.01',min:'0'},helperText:\"e.g., kWh for electricity, gallons for water\",sx:{mb:2}}),/*#__PURE__*/_jsxs(LocalizationProvider,{dateAdapter:AdapterDateFns,children:[/*#__PURE__*/_jsx(DatePicker,{label:\"Bill Date\",value:formData.bill_date,onChange:newValue=>setFormData(prev=>({...prev,bill_date:newValue})),renderInput:params=>/*#__PURE__*/_jsx(TextField,{...params,fullWidth:true,sx:{mb:2},required:true})}),/*#__PURE__*/_jsx(DatePicker,{label:\"Due Date\",value:formData.due_date,onChange:newValue=>setFormData(prev=>({...prev,due_date:newValue})),renderInput:params=>/*#__PURE__*/_jsx(TextField,{...params,fullWidth:true,sx:{mb:2},required:true})})]}),/*#__PURE__*/_jsxs(Button,{variant:\"contained\",component:\"label\",fullWidth:true,sx:{mb:2},children:[\"Upload Bill\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",hidden:true,accept:\".pdf,.png,.jpg,.jpeg\",onChange:handleFileChange})]}),file&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:2},children:[\"Selected file: \",file.name]}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2},children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate('/bills'),disabled:loading,fullWidth:true,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:loading,fullWidth:true,children:\"Add Bill\"})]})]})]})]});}","map":{"version":3,"names":["React","useState","useNavigate","Box","Paper","Typography","TextField","Button","MenuItem","Alert","DatePicker","LocalizationProvider","AdapterDateFns","axios","jsx","_jsx","jsxs","_jsxs","utilityTypes","AddBill","formData","setFormData","utility_type","amount","usage_amount","bill_date","due_date","file","setFile","error","setError","loading","setLoading","navigate","handleChange","e","name","value","target","prev","handleFileChange","files","handleSubmit","preventDefault","formDataToSend","FormData","append","toISOString","split","post","headers","err","_err$response","_err$response$data","response","data","children","variant","gutterBottom","sx","p","maxWidth","mx","severity","mb","component","onSubmit","select","fullWidth","label","onChange","required","map","type","inputProps","step","min","helperText","dateAdapter","newValue","renderInput","params","hidden","accept","display","gap","onClick","disabled"],"sources":["C:/Users/vpmar/OneDrive/Área de Trabalho/Chris/CascadeProjects/windsurf-project/utility-bill-manager/frontend/src/pages/AddBill.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  MenuItem,\n  Alert,\n} from '@mui/material';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport axios from 'axios';\n\nconst utilityTypes = [\n  'Electricity',\n  'Water',\n  'Gas',\n  'Internet',\n  'Phone',\n  'Cable TV',\n  'Other',\n];\n\nexport default function AddBill() {\n  const [formData, setFormData] = useState({\n    utility_type: '',\n    amount: '',\n    usage_amount: '',\n    bill_date: null,\n    due_date: null,\n  });\n  const [file, setFile] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleFileChange = (e) => {\n    if (e.target.files[0]) {\n      setFile(e.target.files[0]);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!file) {\n      setError('Please select a bill file');\n      return;\n    }\n\n    try {\n      setError('');\n      setLoading(true);\n\n      const formDataToSend = new FormData();\n      formDataToSend.append('file', file);\n      formDataToSend.append('utility_type', formData.utility_type);\n      formDataToSend.append('amount', formData.amount);\n      formDataToSend.append('usage_amount', formData.usage_amount);\n      formDataToSend.append(\n        'bill_date',\n        formData.bill_date.toISOString().split('T')[0]\n      );\n      formDataToSend.append(\n        'due_date',\n        formData.due_date.toISOString().split('T')[0]\n      );\n\n      await axios.post('/api/bills', formDataToSend, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      navigate('/bills');\n    } catch (err) {\n      setError(err.response?.data?.error || 'Failed to add bill');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box>\n      <Typography variant=\"h4\" gutterBottom>\n        Add New Bill\n      </Typography>\n\n      <Paper sx={{ p: 3, maxWidth: 600, mx: 'auto' }}>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Box component=\"form\" onSubmit={handleSubmit}>\n          <TextField\n            select\n            fullWidth\n            label=\"Utility Type\"\n            name=\"utility_type\"\n            value={formData.utility_type}\n            onChange={handleChange}\n            required\n            sx={{ mb: 2 }}\n          >\n            {utilityTypes.map((type) => (\n              <MenuItem key={type} value={type}>\n                {type}\n              </MenuItem>\n            ))}\n          </TextField>\n\n          <TextField\n            fullWidth\n            label=\"Amount\"\n            name=\"amount\"\n            type=\"number\"\n            value={formData.amount}\n            onChange={handleChange}\n            required\n            inputProps={{ step: '0.01', min: '0' }}\n            sx={{ mb: 2 }}\n          />\n\n          <TextField\n            fullWidth\n            label=\"Usage Amount\"\n            name=\"usage_amount\"\n            type=\"number\"\n            value={formData.usage_amount}\n            onChange={handleChange}\n            inputProps={{ step: '0.01', min: '0' }}\n            helperText=\"e.g., kWh for electricity, gallons for water\"\n            sx={{ mb: 2 }}\n          />\n\n          <LocalizationProvider dateAdapter={AdapterDateFns}>\n            <DatePicker\n              label=\"Bill Date\"\n              value={formData.bill_date}\n              onChange={(newValue) =>\n                setFormData((prev) => ({ ...prev, bill_date: newValue }))\n              }\n              renderInput={(params) => (\n                <TextField {...params} fullWidth sx={{ mb: 2 }} required />\n              )}\n            />\n\n            <DatePicker\n              label=\"Due Date\"\n              value={formData.due_date}\n              onChange={(newValue) =>\n                setFormData((prev) => ({ ...prev, due_date: newValue }))\n              }\n              renderInput={(params) => (\n                <TextField {...params} fullWidth sx={{ mb: 2 }} required />\n              )}\n            />\n          </LocalizationProvider>\n\n          <Button\n            variant=\"contained\"\n            component=\"label\"\n            fullWidth\n            sx={{ mb: 2 }}\n          >\n            Upload Bill\n            <input\n              type=\"file\"\n              hidden\n              accept=\".pdf,.png,.jpg,.jpeg\"\n              onChange={handleFileChange}\n            />\n          </Button>\n\n          {file && (\n            <Typography variant=\"body2\" sx={{ mb: 2 }}>\n              Selected file: {file.name}\n            </Typography>\n          )}\n\n          <Box sx={{ display: 'flex', gap: 2 }}>\n            <Button\n              variant=\"outlined\"\n              onClick={() => navigate('/bills')}\n              disabled={loading}\n              fullWidth\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              disabled={loading}\n              fullWidth\n            >\n              Add Bill\n            </Button>\n          </Box>\n        </Box>\n      </Paper>\n    </Box>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OACEC,GAAG,CACHC,KAAK,CACLC,UAAU,CACVC,SAAS,CACTC,MAAM,CACNC,QAAQ,CACRC,KAAK,KACA,eAAe,CACtB,OAASC,UAAU,KAAQ,gCAAgC,CAC3D,OAASC,oBAAoB,KAAQ,0CAA0C,CAC/E,OAASC,cAAc,KAAQ,oCAAoC,CACnE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,YAAY,CAAG,CACnB,aAAa,CACb,OAAO,CACP,KAAK,CACL,UAAU,CACV,OAAO,CACP,UAAU,CACV,OAAO,CACR,CAED,cAAe,SAAS,CAAAC,OAAOA,CAAA,CAAG,CAChC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,CACvCqB,YAAY,CAAE,EAAE,CAChBC,MAAM,CAAE,EAAE,CACVC,YAAY,CAAE,EAAE,CAChBC,SAAS,CAAE,IAAI,CACfC,QAAQ,CAAE,IACZ,CAAC,CAAC,CACF,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAG3B,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAC8B,OAAO,CAAEC,UAAU,CAAC,CAAG/B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAgC,QAAQ,CAAG/B,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAgC,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCjB,WAAW,CAAEkB,IAAI,GAAM,CACrB,GAAGA,IAAI,CACP,CAACH,IAAI,EAAGC,KACV,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAG,gBAAgB,CAAIL,CAAC,EAAK,CAC9B,GAAIA,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAE,CACrBb,OAAO,CAACO,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAP,CAAC,EAAK,CAChCA,CAAC,CAACQ,cAAc,CAAC,CAAC,CAClB,GAAI,CAAChB,IAAI,CAAE,CACTG,QAAQ,CAAC,2BAA2B,CAAC,CACrC,OACF,CAEA,GAAI,CACFA,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CAEhB,KAAM,CAAAY,cAAc,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CACrCD,cAAc,CAACE,MAAM,CAAC,MAAM,CAAEnB,IAAI,CAAC,CACnCiB,cAAc,CAACE,MAAM,CAAC,cAAc,CAAE1B,QAAQ,CAACE,YAAY,CAAC,CAC5DsB,cAAc,CAACE,MAAM,CAAC,QAAQ,CAAE1B,QAAQ,CAACG,MAAM,CAAC,CAChDqB,cAAc,CAACE,MAAM,CAAC,cAAc,CAAE1B,QAAQ,CAACI,YAAY,CAAC,CAC5DoB,cAAc,CAACE,MAAM,CACnB,WAAW,CACX1B,QAAQ,CAACK,SAAS,CAACsB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAC/C,CAAC,CACDJ,cAAc,CAACE,MAAM,CACnB,UAAU,CACV1B,QAAQ,CAACM,QAAQ,CAACqB,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAC9C,CAAC,CAED,KAAM,CAAAnC,KAAK,CAACoC,IAAI,CAAC,YAAY,CAAEL,cAAc,CAAE,CAC7CM,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,CAEFjB,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAE,MAAOkB,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZvB,QAAQ,CAAC,EAAAsB,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBxB,KAAK,GAAI,oBAAoB,CAAC,CAC7D,CAAC,OAAS,CACRG,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEf,KAAA,CAACd,GAAG,EAAAqD,QAAA,eACFzC,IAAA,CAACV,UAAU,EAACoD,OAAO,CAAC,IAAI,CAACC,YAAY,MAAAF,QAAA,CAAC,cAEtC,CAAY,CAAC,cAEbvC,KAAA,CAACb,KAAK,EAACuD,EAAE,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAEC,QAAQ,CAAE,GAAG,CAAEC,EAAE,CAAE,MAAO,CAAE,CAAAN,QAAA,EAC5C3B,KAAK,eACJd,IAAA,CAACN,KAAK,EAACsD,QAAQ,CAAC,OAAO,CAACJ,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,CACnC3B,KAAK,CACD,CACR,cAEDZ,KAAA,CAACd,GAAG,EAAC8D,SAAS,CAAC,MAAM,CAACC,QAAQ,CAAExB,YAAa,CAAAc,QAAA,eAC3CzC,IAAA,CAACT,SAAS,EACR6D,MAAM,MACNC,SAAS,MACTC,KAAK,CAAC,cAAc,CACpBjC,IAAI,CAAC,cAAc,CACnBC,KAAK,CAAEjB,QAAQ,CAACE,YAAa,CAC7BgD,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACRZ,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,CAEbtC,YAAY,CAACsD,GAAG,CAAEC,IAAI,eACrB1D,IAAA,CAACP,QAAQ,EAAY6B,KAAK,CAAEoC,IAAK,CAAAjB,QAAA,CAC9BiB,IAAI,EADQA,IAEL,CACX,CAAC,CACO,CAAC,cAEZ1D,IAAA,CAACT,SAAS,EACR8D,SAAS,MACTC,KAAK,CAAC,QAAQ,CACdjC,IAAI,CAAC,QAAQ,CACbqC,IAAI,CAAC,QAAQ,CACbpC,KAAK,CAAEjB,QAAQ,CAACG,MAAO,CACvB+C,QAAQ,CAAEpC,YAAa,CACvBqC,QAAQ,MACRG,UAAU,CAAE,CAAEC,IAAI,CAAE,MAAM,CAAEC,GAAG,CAAE,GAAI,CAAE,CACvCjB,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CACf,CAAC,cAEFjD,IAAA,CAACT,SAAS,EACR8D,SAAS,MACTC,KAAK,CAAC,cAAc,CACpBjC,IAAI,CAAC,cAAc,CACnBqC,IAAI,CAAC,QAAQ,CACbpC,KAAK,CAAEjB,QAAQ,CAACI,YAAa,CAC7B8C,QAAQ,CAAEpC,YAAa,CACvBwC,UAAU,CAAE,CAAEC,IAAI,CAAE,MAAM,CAAEC,GAAG,CAAE,GAAI,CAAE,CACvCC,UAAU,CAAC,8CAA8C,CACzDlB,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CACf,CAAC,cAEF/C,KAAA,CAACN,oBAAoB,EAACmE,WAAW,CAAElE,cAAe,CAAA4C,QAAA,eAChDzC,IAAA,CAACL,UAAU,EACT2D,KAAK,CAAC,WAAW,CACjBhC,KAAK,CAAEjB,QAAQ,CAACK,SAAU,CAC1B6C,QAAQ,CAAGS,QAAQ,EACjB1D,WAAW,CAAEkB,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAEd,SAAS,CAAEsD,QAAS,CAAC,CAAC,CACzD,CACDC,WAAW,CAAGC,MAAM,eAClBlE,IAAA,CAACT,SAAS,KAAK2E,MAAM,CAAEb,SAAS,MAACT,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAACO,QAAQ,MAAE,CAC1D,CACH,CAAC,cAEFxD,IAAA,CAACL,UAAU,EACT2D,KAAK,CAAC,UAAU,CAChBhC,KAAK,CAAEjB,QAAQ,CAACM,QAAS,CACzB4C,QAAQ,CAAGS,QAAQ,EACjB1D,WAAW,CAAEkB,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAEb,QAAQ,CAAEqD,QAAS,CAAC,CAAC,CACxD,CACDC,WAAW,CAAGC,MAAM,eAClBlE,IAAA,CAACT,SAAS,KAAK2E,MAAM,CAAEb,SAAS,MAACT,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAACO,QAAQ,MAAE,CAC1D,CACH,CAAC,EACkB,CAAC,cAEvBtD,KAAA,CAACV,MAAM,EACLkD,OAAO,CAAC,WAAW,CACnBQ,SAAS,CAAC,OAAO,CACjBG,SAAS,MACTT,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,EACf,aAEC,cAAAzC,IAAA,UACE0D,IAAI,CAAC,MAAM,CACXS,MAAM,MACNC,MAAM,CAAC,sBAAsB,CAC7Bb,QAAQ,CAAE9B,gBAAiB,CAC5B,CAAC,EACI,CAAC,CAERb,IAAI,eACHV,KAAA,CAACZ,UAAU,EAACoD,OAAO,CAAC,OAAO,CAACE,EAAE,CAAE,CAAEK,EAAE,CAAE,CAAE,CAAE,CAAAR,QAAA,EAAC,iBAC1B,CAAC7B,IAAI,CAACS,IAAI,EACf,CACb,cAEDnB,KAAA,CAACd,GAAG,EAACwD,EAAE,CAAE,CAAEyB,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,CAAE,CAAE,CAAA7B,QAAA,eACnCzC,IAAA,CAACR,MAAM,EACLkD,OAAO,CAAC,UAAU,CAClB6B,OAAO,CAAEA,CAAA,GAAMrD,QAAQ,CAAC,QAAQ,CAAE,CAClCsD,QAAQ,CAAExD,OAAQ,CAClBqC,SAAS,MAAAZ,QAAA,CACV,QAED,CAAQ,CAAC,cACTzC,IAAA,CAACR,MAAM,EACLkE,IAAI,CAAC,QAAQ,CACbhB,OAAO,CAAC,WAAW,CACnB8B,QAAQ,CAAExD,OAAQ,CAClBqC,SAAS,MAAAZ,QAAA,CACV,UAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,EACD,CAAC,EACL,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}